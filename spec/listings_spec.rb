# encoding: UTF-8
require 'spec_helper'

describe CraigScrape::Listings do
  context "listing_cta_ftl_112612.html" do
    let(:listing) { described_class.new( uri_for('listing_cta_ftl_112612.html') ) }
    specify{ listing.posts.should have(100).items }
    specify{ listing.posts.collect(&:post_date).uniq.should eq([Time.parse('2012-11-26 00:00:00 -0500')]) }
    specify{ listing.next_page_href.should eq('index100.html') }
    specify{ listing.posts.collect(&:title).should eq(["#2009 Lexus GS 450h 4dr Car Hybrid (only 20,733 miles)", "we buy junk-bus-truck- car for cash!!$500-$5000-5612062848 ", nil, "►08 CADILLAC CTS BUY HERE PAY HERE NO CREDIT CHECK 954-986-6600", "#2008 Lexus ES 350 4dr Car ", nil, nil, "1997 Oldsmobile Aurora ", "chevrolet impala", nil, "USED 2007 Honda Accord Sdn EX-L", "2003 Mitsubishi Montero Sport 4dr LS ", "USED 2012 Jeep Wrangler ", "Chevy Chevelle Wagon 1972", "we buy-bus-truck- junk cars-$500-5000$-9542976670-cashhhh ", "☎   Financing you can rely on even with BAD CREDIT.Zero Down Programs.", "Kia Soul 2011", "USED 2011 HONDA CIVIC LX-S", "# 2006 #Kia # Sportage SUV ", "1999 Mustang GT w/ '08 3 Valve Engine Swap", "1998 Buick Century ", "#2009 BMW Z4 Convertible sDrive35i Convertible", "2010 Ford Escape", "2011 MAZDA MAZDA3 I SPORT  $123 MONTHLY ", "2010 Dodge Challenger Coupe SRT8 w/Navigation (only 8,423 miles)", "#2012 Mercedes-Benz M-Class Sport Utility ML350 4MATIC AWD", "2009 Accord Sdn Honda", "we pay cash money for your -buses-trucks-junk car!!$500-$6000-3058794628 ", "Cars By DWizz 2005 Ford Ranger 4x4 Super A/C ", "#2009 Mercedes-Benz SLK-Class Convertible SLK300 Convertible (only 20,424 miles)", "2005 suburban 4x4", "✿  IF YOUR CREDIT IS A MESS and you have ZERO DOWN. Let us Help You.", "1997 Mazda se B2300 pickup truck 5 speed 4 cylinder ", "Chevy Caprice (1973 )", nil, "2012 Ford Fusion", "Nissan Sentra 2005 red", nil, "2010 MERCEDES-BENZ S-CLASS NOW AVAILABLE", "AVAILABLE NOW 2010 VOLVO XC60", nil, "#2011 Nissan Sentra 4dr Car 2.0", "$$$$cash cash$$$ 4 any bus-truck- car!!!$500-$5000-9542976670 ", "Toyota Camry 1993", "#2011 Chevrolet Impala # Sedan LT Fleet", "2000 Nissan Altima", "#2009 Honda Odyssey Mini-van, Passenger EX-L", "Cars By DWizz 2000 Buick Lesabre Limited 70K ml", "1995 Ford Explorer Cloth Bright White", "2007 CADILLAC ESCALADE ESV AWD W/ NAV $215 MONTHLY  NEED CAR FAST", "2004 F-150 Ford Lariot Truck", "-   Rates as low as 1.99% -  2006 Dodge Charger SE Sedan -  ", "Volvo s60 turbo", "2011 Toyota Sienna", nil, "1973 chevy caprice (Fixed up)", "2010 DODGE RAM 1500 CREW CAB $201 MONTHLY  FAST INSTANT APPROVALS", "1970 camaro parts car $500 786.299.2121", "2011 Kia Soul Come See this car Today!", "2011 Nissan Versa bad credit? need a car?", "☞  GET A CAR..Even With Poor Credit, No money Down Programs.", "Freightliner Sprinter", nil, "☆☆☆☆ LAND ROVER RANGE ROVER HSE 2004☆☆&#9734", nil, "junk car 4 top money in cash!!$500-$5000-5612062848 ", "TOYOTA CAMRY 2005 LE", "## 2012 Nissan Altima 2.5 Sedan 4D ", "KIA SEPHIA GS 1997 ", nil, " **************************   NISSAN ALTIMA 2006 *********************", "2011 Chevrolet Malibu", "Honda civic 2001", nil, "> 2004 >MITSUBISHI > ENDEAVOR  ", "2005 DODGE CARAVAN PASSENGER NOW AVAILABLE", "#2012 Ford Econoline Wagon Full-size Passenger Van XLT 15 Passenger", "USED 2003 Hyundai Sonata ", "Raider Mitsubishi 2006", nil, "AVAILABLE 2011 KIA OPTIMA", "Need to get Boats Shipped?", "➍  GET ROLLING TODAY -- Any Credit..Low, Low Downpayments.", "@ @   Guaranteed Approval !  2009 Chevrolet Impala LT Sedan @ @  ", "2012 Jeep Wrangler", "2008 ACURA MDX 5DR !!", "we buy cars in cash!!$600-$6000-7864160322 ", "Kia 2009 Rio", "2003 toyota corolla automatico ", " CHRYSKER SEBRING 2.7L V6 ", nil, "USED 2002 Buick Regal ", "USED 2004 Toyota Camry Solara SLE", "USED 2003 Jeep Grand Cherokee Laredo", "USED 2003 Honda Civic LX", "CERTIFIED 2010 Honda Civic Sdn LX", "2004 MAZDA3 S HATCH WAGON honda civic", "1999 oldsmobile intrigue GL 4 dr", nil, "USED 2010 NISSAN MAXIMA 3.5 SV"]) }
  end

  context 'listing_search_ppa_nyc_121212.html' do
    let(:listing) {  described_class.new( uri_for('listing_search_ppa_nyc_121212.html') ) }

    specify{ listing.posts.should have(100).items }
    specify{ listing.posts.collect(&:post_date).uniq.should eq(['2012-12-12 00:00:00 -0500', 
      '2012-12-11 00:00:00 -0500', '2012-12-10 00:00:00 -0500'].collect{|t| Time.parse(t) }) }
    specify{ listing.next_page_href.should eq('/search/ppa?query=kenmore&srchType=A&s=100') }
    specify{ listing.posts.collect(&:title).should eq(["Staten island appliance repair ", "Kenmore 5200 BTU Air Conditioner", "Kenmore Range Hood", "Kenmore bagless Canister Vacuum quick sale", "LIQUIDATION SALE . washer & dryer sets !!!!!! ", "◄ Washer dryer set ►  works mint looks mint!!", "LIQUIDATION SALE . washer & dryer sets !!!!!! ", "LIQUIDATION SALE !! Washer Dryer Sets ! DON'T MISS OUT!! ", "Kenmore Elite 31.0 cu. ft. French-Door Bottom-Freezer Refrigerator", "Kenmore Elite 31.0 cu. ft. French-Door Bottom-Freezer Refrigerator", "◄ PRE OWNED APPLIANCE WAREHOUSE . OPEN 7 days a week !!", "Kenmore Portable Dishwasher", "Kenmore Washer/Dryer Combo", "Neutralizer", "Kenmore washing machine and dryer", "Gorgeous electric stove, Kenmore", "Whirlpool Dryer Lint  Screen Cover-Compact Dryer-- NEW", "APPLIANCE AND AIR CONDITIONER INSTALLER AVAILABLE", "side by side refrigerator kenmore 18 cu ft ", "kenmore 26 cu ft side by side refrigerator ", "26 cu ft, kenmore side by side refrigerator", "LIQUIDATION SALE . washer & dryer sets !!!!!! ", "BUY USED APPLIANCES WITH CONFIDENCE !!!!! ", "FRONTLOAD GAS DRYER . must see !! KENMORE!!", "KENMORE 24\" washer-dryer (price negotiable)", "Kenmore Washing Machine", "KENMORE 30\" ELECTRIC RANGE, 4 BURNERS, SELF CLEAN, WHITE COLOR", "Glass smooth cooktop for oven", "KENMORE 71069 2 Doors and 2 Drawers", "KENMORE- 71053 refrigerator 3 DOOR", "KENMORE 71069 2 Doors and 2 Drawers", "FREe kenmore fridge mUST goooo", "DEEP FREEZER KENMORE ", "Kenmore Refrigerator", "KENMORE MICROWAVE STAINLESS ", "White Kenmore Stove", "Kenmore Air Cleaner / Pureifier purchased at Sears ", "Kenmore Air Cleaner / Pureifier purchased at Sears ", "WASHER and DRYER in 1", "White Kenmore 21.0 cu. ft. Top-Freezer Refrigerator", "Kenmore Top-Load Washing Machine in Excellent/Like-New Condition", "Kenmore Fridge - Aroma Rice Cooker - Closet Organizer", "Kenmore Elite SmartWash QuietPak9", "NEVERAS!!!!!NEVERAS!!!!!!NEVERAS!!!!!!", "1.8  cubic fridge Kenmore new ", "Kenmore compact Washer & Dryer compact", "gas dryers . LIQUIDATION SALE !! must go!", "LIQUIDATION SALE . washer & dryer sets !!!!!! ", "LONG ISLANDS MOST TRUSTED SOURCE FOR USED APPLIANCES", "LIQUIDATION SALE !!!! GAS STOVES . must go!!", "LIQUIDATION SALE !!!! GAS STOVES . must go!!", "NEW YORKS MOST TRUSTED SOURCE FOR USED APPLIANCES", "NEW YORKS MOST TRUSTED SOURCE FOR USED APPLIANCES", "LIQUIDATION SALE !!!! GAS DRYERS . must go!!", "REFRIGERATOR 21 CU FT KENMORE", "REFRIGERATOR 21 CU FT KENMORE", "Kenmore Elite 31.0 cu. ft. French-Door Bottom-Freezer Refrigerator ", "Sears Kenmore Compact Fridge ", "kenmore dryer ", "KENMORE GAS STOVE $50  ", "Kenmore Progressive 335 Air Purifier Cleaner ", "GAS RANGE . Mint ..UNDER WARRANTY!! ", "KENMORE GAS STOVE $50", "Red Kenmore 1.1 cu. ft. Microwave", "gas dryer and electric drier - gas range 30\"", "kenmore convention toaster oven red 82005", "electric drier with mating kenmore automatic washer - gas range 30\"", "electric dryer with paired kenmore washing machine - used gas stove", "dryer & washer - guaranteed ", "Washing machine", "KENMORE 24\" ELECTRIC DRYER, 110V. REG OUTLET, WHITE COLOR", "dryer & washer - guaranteed ", "appliances services  and Repair", "Kenmore washer and dryer gas", "Kenmore Elite Ex Lg Capacity Dryer", "Kenmore Elite Stainless Steel refrigerator", "Kenmore Advantage Washer", "Kenmore Gas Dryer", "Brand new Kenmore water heater 50 gallon", "Kenmore 10000 BTU Air Conditioner", "Kenmore Elite 31.0 cu. ft. French-Door Bottom-Freezer Refrigerator", "Kenmore  French-Door Bottom-Freezer Refrigerator -", "Kenmore Elite 31.0 cu. ft. French-Door Bottom-Freezer Refrigerator ", "Kenmore Elite 31.0 cu. ft. French-Door Bottom-Freezer Refrigerator ", "Kenmore Elite  31.0 cu. ft. French-Door Bottom-Freezer Refrigerator - ", "Brand new kenmore 12 cup drip coffeemaker", "Kenmore Air Purifier - Hepa - 2 extra filer boxes available- like new", "Kenmore ultra Dishwasher", "Kenmore washing machine and dryer", "20,000 BTU Air conditioner NEW", "Kenmore 2 door fridge", "Kenmore Frig ", "kenmore dryer", "SYWR Member One Day Sale!!!", "KENMORE ELITE OASIS WASHER", "Selling a dryer", "Portable dishwasher = BEST GIFT EVER", "Kenmore 18\" Portable Dishwasher - Used - I sure will miss it", "kenmore refrigerator 72063", "Dishwasher-Freestanding 24\""]) }
  end
end
